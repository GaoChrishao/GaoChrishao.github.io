<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
    <id>https://gaochrishao.github.io</id>
    <title>GCH&apos;s blog</title>
    <updated>2021-07-12T09:56:05.930Z</updated>
    <generator>https://github.com/jpmonette/feed</generator>
    <link rel="alternate" href="https://gaochrishao.github.io"/>
    <link rel="self" href="https://gaochrishao.github.io/atom.xml"/>
    <subtitle>GCH&apos;s blog</subtitle>
    <logo>https://gaochrishao.github.io/images/avatar.png</logo>
    <icon>https://gaochrishao.github.io/favicon.ico</icon>
    <rights>All rights reserved 2021, GCH&apos;s blog</rights>
    <entry>
        <title type="html"><![CDATA[LinuxåŸºæœ¬æ“ä½œ]]></title>
        <id>https://gaochrishao.github.io/post/linux-ji-ben-cao-zuo/</id>
        <link href="https://gaochrishao.github.io/post/linux-ji-ben-cao-zuo/">
        </link>
        <updated>2021-07-12T09:50:49.000Z</updated>
        <content type="html"><![CDATA[<h2 id="1ç”¨æˆ·ç®¡ç†">1.ç”¨æˆ·ç®¡ç†</h2>
<p>åˆ‡æ¢ç”¨æˆ·</p>
<pre><code class="language-sh">su ç”¨æˆ·å
</code></pre>
<p>æ·»åŠ ç”¨è¿‡æˆ·</p>
<pre><code class="language-sh">su useradd é€‰é¡¹ ç”¨æˆ·å

å‚æ•°è¯´æ˜ï¼š
é€‰é¡¹:
-c comment æŒ‡å®šä¸€æ®µæ³¨é‡Šæ€§æè¿°ã€‚
-d ç›®å½• æŒ‡å®šç”¨æˆ·ä¸»ç›®å½•ï¼Œå¦‚æœæ­¤ç›®å½•ä¸å­˜åœ¨ï¼Œåˆ™åŒæ—¶ä½¿ç”¨-mé€‰é¡¹ï¼Œå¯ä»¥åˆ›å»ºä¸»ç›®å½•ã€‚
-g ç”¨æˆ·ç»„ æŒ‡å®šç”¨æˆ·æ‰€å±çš„ç”¨æˆ·ç»„ã€‚
-G ç”¨æˆ·ç»„ï¼Œç”¨æˆ·ç»„ æŒ‡å®šç”¨æˆ·æ‰€å±çš„é™„åŠ ç»„ã€‚
-s Shellæ–‡ä»¶ æŒ‡å®šç”¨æˆ·çš„ç™»å½•Shellã€‚
-u ç”¨æˆ·å· æŒ‡å®šç”¨æˆ·çš„ç”¨æˆ·å·ï¼Œå¦‚æœåŒæ—¶æœ‰-oé€‰é¡¹ï¼Œåˆ™å¯ä»¥é‡å¤ä½¿ç”¨å…¶ä»–ç”¨æˆ·çš„æ ‡è¯†å·ã€‚
ç”¨æˆ·å:
æŒ‡å®šæ–°è´¦å·çš„ç™»å½•åã€‚
</code></pre>
<p>è®¾ç½®ç”¨æˆ·å¯†ç </p>
<pre><code class="language-sh">su passwd é€‰é¡¹ ç”¨æˆ·å

å¯ä½¿ç”¨çš„é€‰é¡¹ï¼š
-l é”å®šå£ä»¤ï¼Œå³ç¦ç”¨è´¦å·ã€‚
-u å£ä»¤è§£é”ã€‚
-d ä½¿è´¦å·æ— å£ä»¤ã€‚
-f å¼ºè¿«ç”¨æˆ·ä¸‹æ¬¡ç™»å½•æ—¶ä¿®æ”¹å£ä»¤ã€‚
</code></pre>
<h2 id="2æ–‡ä»¶">2.æ–‡ä»¶</h2>
<pre><code class="language-sh">#find:æŸ¥æ‰¾æ–‡ä»¶
find / -name filename  å…¨ç›˜æŸ¥æ‰¾&quot;filename&quot;æ–‡ä»¶
#df:æŸ¥çœ‹ç£ç›˜ä½¿ç”¨æƒ…å†µ 
dfÂ -h 
#du:æŸ¥çœ‹ç›®å½•ä¸­çš„æ–‡ä»¶å ç”¨å¤§å°æƒ…å†µ 
duÂ -shÂ *Â |Â sortÂ -nr 
#tar:å‹ç¼©æ–‡ä»¶ 
tarÂ -cvfÂ test.tarÂ dir1/Â dir2/Â å‹ç¼©dir1å’Œdir2ç›®å½•çš„å…¨éƒ¨æ–‡ä»¶Â å‹ç¼©åŒ…åä¸ºï¼štest.tar 
tarÂ -xvfÂ test.tarÂ è§£å‹test.tar 
tarÂ -zxvfÂ test.tar.gzÂ è§£å‹test.tar.gz 

#1ã€*.tar ç”¨ tar â€“xvf è§£å‹ 
#2ã€*.gz ç”¨ gzip -dæˆ–è€…gunzip è§£å‹ 
#3ã€*.tar.gzå’Œ*.tgz ç”¨ tar â€“xzf è§£å‹ 
#4ã€*.bz2 ç”¨ bzip2 -dæˆ–è€…ç”¨bunzip2 è§£å‹ 
#5ã€*.tar.bz2ç”¨tar â€“xjf è§£å‹ 
#6ã€*.Z ç”¨ uncompress è§£å‹ 
#7ã€*.tar.Z ç”¨tar â€“xZf è§£å‹ 
#8ã€*.rar ç”¨ unrar eè§£å‹ 
#9ã€*.zip ç”¨ unzip è§£å‹ 


</code></pre>
<p><strong>è½¯é“¾:</strong></p>
<pre><code class="language-sh">ln -s /mnt/e/Linux/ubuntu ~/ubuntu
</code></pre>
<p><strong>ç£ç›˜åˆ†åŒº:</strong></p>
<pre><code class="language-sh">#è¿›å…¥parted
parted
mkpart

</code></pre>
<p><strong>ç£ç›˜æ ¼å¼åŒ–:</strong></p>
<p>mkntfs -f /dev/sda3</p>
<p><strong>æŒ‚è½½ç£ç›˜ï¼š</strong></p>
<pre><code class="language-sh">#æŸ¥çœ‹å·²æŒ‚è½½çš„ç£ç›˜
sudo df -h

#æŸ¥çœ‹æ‰€æœ‰ç£ç›˜
sudo fdisk -l
#ä¸´æ—¶æŒ‚è½½ç£ç›˜
mount -t ntfs-3g /dev/sda3 /storage

#è‡ªåŠ¨æŒ‚è½½ï¼š
#1.ä¿®æ”¹/etc/fstab,æ·»åŠ ä¸€è¡Œï¼Œä¾‹å¦‚ï¼š
/dev/sda3 /home/pi/storage ntfs defaults 0 0
#2.æ£€æµ‹æ–‡ä»¶æ˜¯å¦æ ¼å¼æ­£ç¡®
sudo mount -a
</code></pre>
<h2 id="3è¿›ç¨‹">3.è¿›ç¨‹</h2>
<pre><code class="language-sh">#ps:æŸ¥çœ‹è¿›ç¨‹ 
psÂ -fÂ æŸ¥çœ‹å½“å‰å…è®¸çš„è¿›ç¨‹ 
psÂ -efÂ æŸ¥çœ‹æ‰€æœ‰è¿›ç¨‹
</code></pre>
<h2 id="4å¼€æœºè‡ªå¯è„šæœ¬ç¼–å†™æ–¹å¼">4.å¼€æœºè‡ªå¯è„šæœ¬ç¼–å†™æ–¹å¼</h2>
<p>1.è„šæœ¬æ–‡ä»¶ä»£ç ç¤ºä¾‹ï¼š</p>
<p>frps.service</p>
<pre><code class="language-sh">[Unit]
Description=auto control fan by tmp

[Service]
Type=simple
User=nobody
WorkingDirectory=/home/pi/Gpio
ExecStart=/usr/bin/python -u /home/pi/Gpio/tmp.py
ExecStop=/bin/kill -s TERM &amp;MAINPID
User = root
[Install]
WantedBy=multi-user.target
</code></pre>
<p>etherpad.service</p>
<pre><code class="language-sh">[Unit]
Description=åœ¨çº¿ååŒæ–‡æœ¬ç¼–è¾‘å™¨etherpad
After=network.target  #åœ¨ç½‘ç»œè¿æ¥ä¹‹å

[Service]
Type=simple
ExecStart=/bin/bash /home/etherpad/etherpad-lite/bin/run.sh
ExecStop=/bin/kill -s TERM &amp;MAINPID
User = etherpad  #ä»¥etherpadç”¨æˆ·è¿è¡Œ
[Install]
WantedBy=multi-user.target
</code></pre>
<p>2.æ–‡ä»¶å¤åˆ¶</p>
<p>å°†è„šæœ¬æ–‡ä»¶å¤åˆ¶åˆ° /usr/lib/systemd/system  è·¯å¾„ä¸‹</p>
<p>æ³¨:ä¸åŒçš„ç³»ç»Ÿæ”¾åœ¨çš„ä½ç½®ä¸ä¸€æ ·</p>
<p>centos:/usr/lib/systemd/system</p>
<p>pi:/etc/systemd/system/</p>
<p>3.å¯åŠ¨</p>
<p>systemctl daemon-reload</p>
<p>systemctl start è„šæœ¬åå­—</p>
<p>4.æŸ¥çœ‹çŠ¶æ€</p>
<p>systemctl status è„šæœ¬åå­—</p>
<h2 id="5screenç®¡ç†ä¼šè¯">5.screenç®¡ç†ä¼šè¯</h2>
<pre><code class="language-sh">#screenæ˜¯ä¸€ä¸ªå¯ä»¥åœ¨å¤šä¸ªè¿›ç¨‹ï¼ˆé€šå¸¸æ˜¯äº¤äº’å¼shellï¼‰ä¹‹é—´å¤ç”¨ä¸€ä¸ªç‰©ç†ç»ˆç«¯çš„å…¨å±å¹•çª—å£ç®¡ç†å™¨ã€‚å³linuxä¸‹ä½¿ç”¨å¤šçª—å£

#å¸¸ç”¨screenå‚æ•°
screen -S session_nameÂ  Â  Â  Â  Â  Â # æ–°å»ºä¸€ä¸ªå«session_nameçš„session
screen -lsï¼ˆæˆ–è€…screen -listï¼‰Â  Â # åˆ—å‡ºå½“å‰æ‰€æœ‰çš„session
screen -r session_nameÂ  Â  Â  Â  Â  Â  # å›åˆ°session_nameè¿™ä¸ªsession
screen -d session_nameÂ  Â  Â  Â  Â  Â # è¿œç¨‹detachæŸä¸ªsession
screen -d -r session_nameÂ  Â  Â  Â  # ç»“æŸå½“å‰sessionå¹¶å›åˆ°session_nameè¿™ä¸ªsession


#è¿›å…¥screençª—å£åï¼Œæƒ³æš‚æ—¶é€€å‡ºï¼ˆç­‰ä¼šè¿˜æƒ³è¿æ¥è¿™ä¸ªscreençª—å£ï¼‰
crtl+a+d
#é€€å‡ºå½“å‰screençª—å£ï¼Œç»“æŸå½“å‰screençª—å£ï¼Œä¸æƒ³å†è¿æ¥å›æ¥ï¼ˆå³æ€æ­»ä¼šè¯ï¼‰
exitæˆ–è€…ctrl+d
</code></pre>
<p>åœ¨shè„šæœ¬ä¸­å¯åŠ¨</p>
<pre><code class="language-sh">screen_name1=$&quot;frpc&quot;
screen -dmS $screen_name1
screen -x -S $screen_name1 -p 0 -X stuff 'cd ~/ubuntu\n'
screen -x -S $screen_name1 -p 0 -X stuff './frpc_linux_amd64\n'
</code></pre>
<h2 id="6-vimåŸºæœ¬æ“ä½œ">6. vimåŸºæœ¬æ“ä½œ</h2>
<p>iï¼šè¾“å…¥æ¨¡å¼</p>
<p>excï¼šé€€å‡ºè¾“å…¥æ¨¡å¼</p>
<p>ddï¼šåˆ é™¤å…‰æ ‡æ‰€åœ¨è¡Œ</p>
<p>dGï¼šåˆ é™¤å…‰æ ‡åŠä»¥ä¸‹è¡Œçš„å†…å®¹</p>
<p>ggï¼šè·³è½¬åˆ°é¦–è¡Œ</p>
<p>3ddï¼šåˆ é™¤å…‰æ ‡åŠä»¥ä¸‹å…±3è¡Œçš„å†…å®¹</p>
<p>yyï¼šå¤åˆ¶å…‰æ ‡æ‰€åœ¨è¡Œ</p>
<p>nyyï¼šå¤åˆ¶nè¡Œ</p>
<p>pï¼šç²˜è´´åˆ°å…‰æ ‡æ‰€åœ¨ä½ç½®</p>
<p>â€œ:XXXâ€ï¼šè·³è½¬åˆ°XXXè¡Œ</p>
<h2 id="7wifi">7.wifi</h2>
<p><strong>æ³•ä¸€ï¼š</strong></p>
<pre><code class="language-sh">#å®‰è£…nmcli
sudo apt-get install nmcli
#å®‰è£…nmcli
sudo apt install network-manager

#æŸ¥çœ‹ç½‘ç»œè®¾å¤‡
sudo nmcli dev

#æ‰“å¼€wifi
sudo nmcli r wifi on

#æ‰«æwifi
sudo nmcli dev wifi

#è¿æ¥wifi
sudo nmcli dev wifi connect &quot;wifiå&quot; password &quot;wifiå¯†ç &quot;

#1.è¿æ¥wifi
sudo nmcli dev wifi connect ssidåç§° password WiFiå¯†ç  wep-key-type key ifname æ— çº¿ç½‘å¡åç§°
#2.æŸ¥çœ‹æ— çº¿ç½‘å¡åç§°åŠçŠ¶æ€
nmcli device
#3.æŸ¥çœ‹æ— çº¿ç½‘å¡æ›´å¤šé…ç½®å‚æ•°çš„å‘½ä»¤
nmcli dev wifi help
</code></pre>
<p><a href="https://blog.csdn.net/weixin_43669941/article/details/107893322">Ubuntu20.04ä½¿ç”¨nmclié…ç½®ç½‘ç»œè¿æ¥_ocfbnjçš„åšå®¢-CSDNåšå®¢</a></p>
<p><strong>æ³•äºŒï¼š</strong></p>
<p>ä¿®æ”¹ <strong>/boot/wpa_supplicant.conf</strong> æ–‡ä»¶</p>
<h2 id="8æ€§èƒ½æµ‹è¯•">8.æ€§èƒ½æµ‹è¯•</h2>
<pre><code class="language-sh">#å®‰è£…sysbench
sudo apt-get install sysbench

#cpuæµ‹è¯•
sysbench --num-threads=4 --test=cpu --cpu-max-prime=20000 run

</code></pre>
<h2 id="9-å®šæ—¶ä»»åŠ¡">9. å®šæ—¶ä»»åŠ¡</h2>
<pre><code class="language-sh">crontab -e
30 2 * * * /home/pi/mc_close.sh
40 3 * * * /home/pi/mc_open.sh

</code></pre>
<p>https://blog.csdn.net/u013967628/article/details/83504839</p>
<h2 id="10-è½¯ä»¶å®‰è£…jdkä¸ºä¾‹">10. è½¯ä»¶å®‰è£…(jdkä¸ºä¾‹)</h2>
<pre><code class="language-sh">#1.åœ¨oracleå®˜ç½‘ä¸‹è½½æŒ‡å®šç‰ˆæœ¬çš„jdk
#https://www.oracle.com/java/technologies/javase/javase-jdk8-downloads.html

#2.æ‹·è´åˆ°æ ‘è“æ´¾å¹¶è§£å‹
tar -zxvf jdk-8u261-linux-arm64-vfp-hflt.tar.gz

#3.åˆ›å»ºè½¯é“¾
sudo ln -s /home/pi/jdk1.8.0_261/bin/java /usr/bin/java
</code></pre>
<h2 id="11-initd">11. init.d</h2>
<pre><code class="language-sh">#!/bin/bash
### BEGIN INIT INFO
#
# Provides:	 location_server
# Required-Start:	$local_fs  $remote_fs
# Required-Stop:	$local_fs  $remote_fs
# Default-Start: 	2 3 4 5
# Default-Stop: 	0 1 6
# Short-Description:	initscript
# Description: 	This file should be used to construct scripts to be placed in /etc/init.d.
#
### END INIT INFO
 
## Fill in name of program here.
PROG=&quot;java16&quot;
PROG_PATH=&quot;/usr/bin&quot; ## Not need, but sometimes helpful (if $PROG resides in /opt for example).
PROG_ARGS=&quot;-jar /home/gch/blogserver.jar&quot; 
PID_PATH=&quot;/var/run/&quot;
 
start() {
    if [ -e &quot;$PID_PATH/$PROG.pid&quot; ]; then
        ## Program is running, exit with error.
        echo &quot;Error! $PROG is currently running!&quot; 1&gt;&amp;2
        exit 1
    else
        ## Change from /dev/null to something like /var/log/$PROG if you want to save output.
        $PROG_PATH/$PROG $PROG_ARGS 2&gt;&amp;1 &gt;/var/log/$PROG &amp;
	$pid=`ps ax | grep -i 'location_server' | sed 's/^\([0-9]\{1,\}\).*/\1/g' | head -n 1`
 
        echo &quot;$PROG started&quot;
        echo $pid &gt; &quot;$PID_PATH/$PROG.pid&quot;
    fi
}
 
stop() {
    echo &quot;begin stop&quot;
    if [ -e &quot;$PID_PATH/$PROG.pid&quot; ]; then
        ## Program is running, so stop it
	pid=`ps ax | grep -i 'location_server' | sed 's/^\([0-9]\{1,\}\).*/\1/g' | head -n 1`
	kill $pid
        
        rm -f  &quot;$PID_PATH/$PROG.pid&quot;
        echo &quot;$PROG stopped&quot;
    else
        ## Program is not running, exit with error.
        echo &quot;Error! $PROG not started!&quot; 1&gt;&amp;2
        exit 1
    fi
}
 
## Check to see if we are running as root first.
## Found at http://www.cyberciti.biz/tips/shell-root-user-check-script.html
if [ &quot;$(id -u)&quot; != &quot;0&quot; ]; then
    echo &quot;This script must be run as root&quot; 1&gt;&amp;2
    exit 1
fi
 
case &quot;$1&quot; in
    start)
        start
        exit 0
    ;;
    stop)
        stop
        exit 0
    ;;
    reload|restart|force-reload)
        stop
        start
        exit 0
    ;;
    **)
        echo &quot;Usage: $0 {start|stop|reload}&quot; 1&gt;&amp;2
        exit 1
    ;;
esac
</code></pre>
<p>sudo chmod +x /etc/init.d/my_tcp ç»™è„šæœ¬æ·»åŠ å¯æ‰§è¡Œæƒé™<br>
sudo /etc/init.d/my_tcp start å¯åŠ¨</p>
]]></content>
    </entry>
    <entry>
        <title type="html"><![CDATA[Win10 WSL]]></title>
        <id>https://gaochrishao.github.io/post/wsl/</id>
        <link href="https://gaochrishao.github.io/post/wsl/">
        </link>
        <updated>2021-07-12T09:44:07.000Z</updated>
        <content type="html"><![CDATA[<p>ğŸ’»ï¼šubuntu18.0.4</p>
<h2 id="1åŸºæœ¬é…ç½®">1.åŸºæœ¬é…ç½®</h2>
<h3 id="11-å¼€å¯ssh">1.1 å¼€å¯ssh</h3>
<p>å…ˆé€šè¿‡ bash è¿›å…¥å­ç³»ç»Ÿä¿®æ”¹é…ç½®</p>
<pre><code class="language-sh">sudo vi /etc/ssh/sshd_config
</code></pre>
<p>å¦‚æœæ–‡ä»¶ä¸å­˜åœ¨è¯´æ˜å°šæœªå®‰è£…ï¼Œåˆ™æ‰§è¡Œå®‰è£…</p>
<pre><code class="language-sh">sudo apt-get install openssh-server
</code></pre>
<p>ç»§ç»­ä¿®æ”¹é…ç½®ï¼Œä¸‹é¢ä»¥å¯†ç ç™»å½•çš„é…ç½®ä½œè¯´æ˜ï¼š</p>
<pre><code class="language-sh">Port = 22 # é»˜è®¤æ˜¯22ç«¯å£ï¼Œå¦‚æœå’Œwindowsç«¯å£å†²çªæˆ–ä½ æƒ³æ¢æˆå…¶ä»–çš„å¦åˆ™ä¸ç”¨åŠ¨
#ListenAddress 0.0.0.0 # å¦‚æœéœ€è¦æŒ‡å®šç›‘å¬çš„IPåˆ™å»é™¤æœ€å·¦ä¾§çš„äº•å·ï¼Œå¹¶é…ç½®å¯¹åº”IPï¼Œé»˜è®¤å³ç›‘å¬PCæ‰€æœ‰IP
PermitRootLogin no # å¦‚æœä½ éœ€è¦ç”¨ root ç›´æ¥ç™»å½•ç³»ç»Ÿåˆ™æ­¤å¤„æ”¹ä¸º yes
PasswordAuthentication no # å°† no æ”¹ä¸º yes è¡¨ç¤ºä½¿ç”¨å¸å·å¯†ç æ–¹å¼ç™»å½•
</code></pre>
<p>ä¸»è¦é…ç½®ä»¥ä¸Šå‡ é¡¹å³å¯ ,ç„¶åå¯åŠ¨ ssh æœåŠ¡</p>
<pre><code class="language-sh">sudo service ssh start
</code></pre>
<p>å¦‚æœæç¤º <code>sshd error: could not load host key</code> åˆ™éœ€è¦é‡æ–°ç”Ÿæˆ key</p>
<pre><code class="language-sh">sudo dpkg-reconfigure openssh-server
</code></pre>
<p>æŸ¥çœ‹æœåŠ¡çŠ¶æ€</p>
<pre><code class="language-sh">sudo service ssh status
# * sshd is running  æ˜¾ç¤ºæ­¤å†…å®¹åˆ™è¡¨ç¤ºå¯åŠ¨æ­£å¸¸
</code></pre>
<pre><code class="language-sh">passwd root # è®¾ç½®ä¸‹å¯†ç 
</code></pre>
<p>é…ç½®é˜²ç«å¢™å¼€å¯ç«¯å£</p>
<blockquote>
<p>1.æ‰“å¼€ Win10 é˜²ç«å¢™è®¾ç½®ï¼Œï¼ˆå¯ä»¥é€šè¿‡å³ä¸‹è§’æœ‰ä¸ªå‘ä¸Šçš„ç®­å¤´ç‚¹å‡»ç›¾ç‰Œå¿«é€Ÿè¿›å…¥é¢æ¿ï¼‰Windows Defender å®‰å…¨ä¸­å¿ƒï¼Œç‚¹å‡»ä¸‹æ–¹çš„é«˜çº§è®¾ç½®</p>
<p>2.é€‰æ‹©å·¦ä¾§<code>å…¥ç«™è§„åˆ™</code> ç„¶åç‚¹å‡»å³ä¾§ <code>æ–°å»ºè§„åˆ™</code></p>
<p>3.é€‰æ‹© <code>ç«¯å£</code> -&gt; <code>tcp</code> -&gt; <code>ç‰¹å®šç«¯å£</code> -&gt; å¡«å…¥åˆšåˆšè®¾ç½®çš„ Port é»˜è®¤ <code>22</code> -&gt; å…è®¸è¿æ¥ -&gt; æäº¤</p>
</blockquote>
<p>å‚è€ƒé“¾æ¥ï¼šhttps://blog.csdn.net/zhouzme/article/details/81087837</p>
<h3 id="12-å¼€æœºè‡ªå¯ubuntuä»¥åŠssh">1.2 å¼€æœºè‡ªå¯ubuntuä»¥åŠssh</h3>
<ol>
<li>
<p>win+rè¾“å…¥shell:startup</p>
</li>
<li>
<p>åˆ›å»ºvbsè„šæœ¬</p>
<pre><code class="language-vbscript">Set ws = CreateObject(&quot;Wscript.Shell&quot;)
ws.run &quot;wsl -d Ubuntu-18.04 -u root /etc/init.wsl start&quot;, vbhide
</code></pre>
<p>å¯ä»¥åœ¨cmdä¸­ä½¿ç”¨wsl -læŸ¥çœ‹å‘è¡Œç‰ˆçš„åå­—</p>
</li>
<li>
<p>ç™»å½•ubuntuå­ç³»ç»Ÿï¼Œåœ¨/etc/init.wslæ–‡ä»¶ï¼Œå†™å…¥ä»¥ä¸‹å†…å®¹</p>
<pre><code class="language-sh">#! /bin/sh
/etc/init.d/ssh $1
</code></pre>
<p>ç„¶åèµ‹äºˆå¯æ‰§è¡Œæƒé™</p>
<pre><code class="language-sh">chmod +x /etc/init.wsl
</code></pre>
</li>
<li>
<p>ç¼–è¾‘sudoersï¼Œé¿å…è¾“å…¥å¯†ç </p>
<pre><code class="language-sh">sudo visudo
</code></pre>
<p>æ·»åŠ ä¸€è¡Œ</p>
<pre><code class="language-sh">%sudo ALL=NOPASSWD: /etc/init.wsl
</code></pre>
</li>
<li>
<p>å¤§åŠŸå‘Šæˆï¼Œé‡å¯ç”µè„‘è¯•è¯•çœ‹å§ï¼</p>
</li>
</ol>
<h3 id="13-æ¢æº">1.3 æ¢æº</h3>
<pre><code class="language-sh">sudo vim /etc/apt/sources.list
</code></pre>
<pre><code class="language-sh"># é˜¿é‡Œæº
deb http://mirrors.aliyun.com/ubuntu/ bionic main restricted universe multiverse
deb http://mirrors.aliyun.com/ubuntu/ bionic-security main restricted universe multiverse
deb http://mirrors.aliyun.com/ubuntu/ bionic-updates main restricted universe multiverse
deb http://mirrors.aliyun.com/ubuntu/ bionic-proposed main restricted universe multiverse
deb http://mirrors.aliyun.com/ubuntu/ bionic-backports main restricted universe multiverse
deb-src http://mirrors.aliyun.com/ubuntu/ bionic main restricted universe multiverse
deb-src http://mirrors.aliyun.com/ubuntu/ bionic-security main restricted universe multiverse
deb-src http://mirrors.aliyun.com/ubuntu/ bionic-updates main restricted universe multiverse
deb-src http://mirrors.aliyun.com/ubuntu/ bionic-proposed main restricted universe multiverse
deb-src http://mirrors.aliyun.com/ubuntu/ bionic-backports main restricted universe multiverse
</code></pre>
<pre><code class="language-sh">sudo apt update &amp;&amp; sudo apt upgrade
</code></pre>
]]></content>
    </entry>
    <entry>
        <title type="html"><![CDATA[æ ‘è“æ´¾å…¥é—¨]]></title>
        <id>https://gaochrishao.github.io/post/shu-mei-pai-ru-men/</id>
        <link href="https://gaochrishao.github.io/post/shu-mei-pai-ru-men/">
        </link>
        <updated>2021-07-12T09:29:33.000Z</updated>
        <content type="html"><![CDATA[<p>ğŸ’»ï¼šæ ‘è“æ´¾4B 2Gå†…å­˜<br>
ğŸ“¦ï¼š1.è®¾å¤‡å®‰è£…ã€2.åŸºæœ¬é…ç½®ã€3.æ¸©æ§é£æ‰‡ã€4.æ‘„åƒå¤´é…ç½®</p>
<h2 id="1å®‰è£…">1.å®‰è£…</h2>
<h3 id="11-å‡†å¤‡å·¥ä½œ">1.1 å‡†å¤‡å·¥ä½œ</h3>
<blockquote>
<p>sdå¡ï¼Œ&gt;=16GB</p>
<p>hdmiçº¿</p>
<p>æ˜¾ç¤ºå™¨</p>
<p>é¼ æ ‡é”®ç›˜</p>
</blockquote>
<h3 id="12çƒ§å…¥ç³»ç»Ÿ">1.2çƒ§å…¥ç³»ç»Ÿ</h3>
<blockquote>
<p>ä¸‹è½½å®˜æ–¹NOOBS</p>
<p>æ ¼å¼åŒ–sdå¡ä¸ºfat32æ ¼å¼</p>
<p>è§£å‹NOOBSå‹ç¼©åŒ…åˆ°sdå¡</p>
<p>æ ‘è“æ´¾æ’å¡ï¼Œæ¥ç”µï¼Œè¿æ¥æ˜¾ç¤ºå™¨é¼ æ ‡é”®ç›˜</p>
</blockquote>
<h3 id="13å®‰è£…ç³»ç»Ÿ">1.3å®‰è£…ç³»ç»Ÿ</h3>
<blockquote>
<p>æ¥ç”µåæ ‘è“æ´¾è‡ªåŠ¨å¯åŠ¨</p>
<p>é€‰æ‹©è¦å®‰è£…çš„ç³»ç»Ÿè¿›è¡Œå®‰è£…ï¼Œç­‰å¾…10min</p>
<p>é‡å¯åè¿›å…¥ç³»ç»Ÿ</p>
</blockquote>
<h2 id="2åŸºæœ¬é…ç½®">2.åŸºæœ¬é…ç½®</h2>
<h3 id="21-ä¿®æ”¹å¯†ç ">2.1 ä¿®æ”¹å¯†ç </h3>
<blockquote>
<p>ç¬¬ä¸€æ¬¡è¿›å…¥ç³»ç»Ÿä¼šè¦æ±‚è®¾ç½®piè´¦å·çš„å¯†ç </p>
<p>sudo suè¿›å…¥rootï¼Œ ä½¿ç”¨passwd rootæ¥ä¿®æ”¹rootè´¦å·çš„å¯†ç </p>
</blockquote>
<h3 id="22-å¼€å¯sshå’Œvnc">2.2 å¼€å¯sshå’Œvnc</h3>
<blockquote>
<p>å‘½ä»¤è¡Œè¾“å…¥ï¼šraspi-config</p>
<p>é€‰æ‹©ï¼š5 Interfacing Options</p>
<p>é€‰æ‹©SSHå’ŒVNCæ¥å¼€å¯</p>
</blockquote>
<h3 id="23æ¢æº">2.3æ¢æº</h3>
<blockquote>
<p>1.å¤‡ä»½æºæ–‡ä»¶</p>
<pre><code class="language-sh">sudo cp /etc/apt/sources.list /etc/apt/sources.list.bak
sudo cp /etc/apt/sources.list.d/raspi.list  /etc/apt/sources.list.d/raspi.list.bak
</code></pre>
<p>2.ä¿®æ”¹è½¯ä»¶æ›´æ–°æº</p>
<pre><code class="language-sh">sudo nano /etc/apt/sources.list
</code></pre>
<p>3.å°†ç¬¬ä¸€è¡Œä¿®æ”¹æˆä¸­ç§‘å¤§çš„è½¯ä»¶æºåœ°å€ï¼Œã€ŒCtrl+Oã€è¿›è¡Œä¿å­˜ï¼Œç„¶åå›è½¦ï¼Œã€ŒCtrl+Xã€é€€å‡ºã€‚</p>
<pre><code class="language-sh">deb http://mirrors.ustc.edu.cn/raspbian/raspbian/ stretch main contrib non-free rpi
</code></pre>
<p>4.ä¿®æ”¹ç³»ç»Ÿæ›´æ–°æº</p>
<pre><code class="language-sh">sudo nano /etc/apt/sources.list.d/raspi.list
</code></pre>
<p>5.å°†ç¬¬ä¸€è¡Œä¿®æ”¹æˆä¸­ç§‘å¤§çš„ç³»ç»Ÿæºåœ°å€ï¼Œã€ŒCtrl+Oã€è¿›è¡Œä¿å­˜ï¼Œç„¶åå›è½¦ï¼Œã€ŒCtrl+Xã€é€€å‡ºã€‚</p>
<pre><code class="language-sh">deb http://mirrors.ustc.edu.cn/archive.raspberrypi.org/debian/ stretch main ui
</code></pre>
<p>6.åŒæ­¥æ›´æ–°æº</p>
<pre><code class="language-sh">sudo apt-get update
</code></pre>
<p>7.æ›´æ–°å‡çº§ä»¥å®‰è£…è½¯ä»¶åŒ…ï¼Œè¿™ä¸ªè¿‡ç¨‹è€—æ—¶è¾ƒé•¿ã€‚</p>
<pre><code class="language-sh">sudo apt-get upgrade
</code></pre>
<p>è½¬è½½è¿æ¥:<a href="https://www.jianshu.com/p/768f0181672b">https://www.jianshu.com/p/768f0181672b</a></p>
</blockquote>
<h3 id="24ufwé˜²ç«å¢™è®¾ç½®">2.4UFWé˜²ç«å¢™è®¾ç½®</h3>
<blockquote>
<p>1.å®‰è£…</p>
<pre><code class="language-sh">sudo apt-get install ufw
</code></pre>
<p>2.å¯ç”¨</p>
<pre><code class="language-sh">sudo ufw enable
sudo ufw default deny
</code></pre>
<p>3.å…³é—­</p>
<pre><code class="language-sh">sudo ufw disable
</code></pre>
<p>4.æŸ¥çœ‹é˜²ç«å¢™çŠ¶æ€</p>
<pre><code class="language-sh">sudo ufw status
</code></pre>
<p>5.å¼€å¯/ç¦ç”¨ç«¯å£æˆ–æœåŠ¡ä¸¾ä¾‹</p>
<pre><code class="language-sh">sudo ufw allow 80 å…è®¸å¤–éƒ¨è®¿é—®80ç«¯å£
sudo ufw delete allow 80 ç¦æ­¢å¤–éƒ¨è®¿é—®80 ç«¯å£
sudo ufw allow from 192.168.1.1 å…è®¸æ­¤IPè®¿é—®æ‰€æœ‰çš„æœ¬æœºç«¯å£
sudo ufw deny smtp ç¦æ­¢å¤–éƒ¨è®¿é—®smtpæœåŠ¡
sudo ufw delete allow smtp åˆ é™¤ä¸Šé¢å»ºç«‹çš„æŸæ¡è§„åˆ™
sudo ufw deny proto tcp from 10.0.0.0/8 to 192.168.0.1 port è¦æ‹’ç»æ‰€æœ‰çš„æµé‡ä»TCPçš„10.0.0.0/8 åˆ°ç«¯å£22çš„åœ°å€192.168.0.1
</code></pre>
<p>6.å¼€å¯ç«¯å£è®¿é—®</p>
<pre><code class="language-sh">sudo ufw allow 22
sudo ufw allow 3306
</code></pre>
</blockquote>
<h3 id="25è“ç‰™è¿æ¥">2.5è“ç‰™è¿æ¥</h3>
<pre><code class="language-sh">#1.æ‰“å¼€è“ç‰™
sudo service bluetooth start
#2.è¿›å…¥bluetoothctl
bluetoothctl
#3.è¾“å…¥ä»¥ä¸‹å‘½ä»¤
power on 
agent on 
default-agent 
scan on 
pair yourDeviceMAC
connect yourDeviceMAC
</code></pre>
<h2 id="3æ¸©æ§é£æ‰‡">3æ¸©æ§é£æ‰‡</h2>
<h3 id="31ç”µè·¯è¿æ¥">3.1ç”µè·¯è¿æ¥</h3>
<p>ä½¿ç”¨è®¾å¤‡ï¼šä¸‰æç®¡s8050	5vç”µé£æ‰‡</p>
<p>è¿çº¿æ–¹å¼</p>
<blockquote>
<p>Cææ¥5Væ­£æï¼Œ2å·æˆ–4å·å¼•è„š<br>
Eææ¥åœ°ï¼Œ6å·å¼•è„š<br>
Bææ¥GPIOå¼•è„šå£ï¼Œè‡ªå·±å®š<br>
å…·ä½“å¼•è„šä½ç½®è§è¿™<a href="https://github.com/Yradex/RaspberryPi3_OS/wiki/%E6%A0%91%E8%8E%93%E6%B4%BE-3-UART-%E5%8F%8A-GPIO-%E9%92%88%E8%84%9A%E5%AE%9A%E4%B9%89">æ ‘è“æ´¾å¼•è„š</a></p>
</blockquote>
<p>æœ€ç»ˆè¿çº¿æ–¹å¼<br>
<img src="https://gaochrishao.github.io/post-images/1626082389805.png" alt="" loading="lazy"></p>
<h3 id="32æ§åˆ¶ä»£ç ">3.2æ§åˆ¶ä»£ç </h3>
<pre><code class="language-python">#!/usr/bin/python2.7
#coding:utf-8
from RPi import GPIO as gpio #æ³¨æ„RPiä¸­çš„iæ˜¯å°å†™çš„
import time
#è·å–cpuçš„æ¸©åº¦
def get_cpu_temp():
    with open(&quot;/sys/class/thermal/thermal_zone0/temp&quot;, 'r') as f:
        temp = float(f.read()) / 1000
    return temp
 
#ç›‘æ§æ¸©åº¦ï¼Œæ§åˆ¶é£æ‰‡å¼€å…³
def check_temp(port):
    #BOARDç¼–å·æ–¹å¼ï¼ŒåŸºäºæ’åº§å¼•è„šç¼–å·
    gpio.setmode(gpio.BOARD)
    #è®¾ç½®å“ªä¸ªå¼•è„šä¸ºè¾“å‡ºæ¨¡å¼
    gpio.setup(port, gpio.OUT)
    #æ ‡è®°é£æ‰‡å¼€å…³çŠ¶æ€
    is_close = True
    try:
        while True:
            temp = get_cpu_temp()
            if is_close:
            #æ¸©åº¦å¤§äºç­‰äº47æ—¶ï¼Œæ‰“å¼€å¼•è„šï¼Œè¾“å‡ºç”µä¿¡å·
                if temp&gt;=47:
                    gpio.output(port, 1)
                    is_close = False
                else:
            #æ¸©åº¦é™ä½åˆ°42æå…¶ä»¥ä¸‹æ—¶ï¼Œå…³é—­å¼•è„š
                    if temp&lt;=42:
                        gpio.output(port, 0)
                        is_close = True
                
        #ä¼‘çœ 3ç§’
            time.sleep(3)
            print &quot;temp:%s, fan is close:%s&quot; % (temp, is_close)
    except Exception, e:
        gpio.cleanup()        
 
if __name__ == '__main__':
    port = 8
    check_temp(port)

</code></pre>
<h3 id="33å¼€æœºè‡ªå¯è„šæœ¬">3.3å¼€æœºè‡ªå¯è„šæœ¬</h3>
<pre><code class="language-shell">[Unit]
Description=auto control fan by tmp

[Service]
Type=simple
User=nobody
WorkingDirectory=/home/pi/Gpio
ExecStart=/usr/bin/python -u /home/pi/Gpio/tmp.py
ExecStop=/bin/kill -s TERM &amp;MAINPID
User = root
[Install]
WantedBy=multi-user.target
</code></pre>
<h3 id="34å‚è€ƒè¿æ¥">3.4å‚è€ƒè¿æ¥</h3>
<p><a href="https://blog.csdn.net/oschina_41734362/article/details/80148833">https://blog.csdn.net/oschina_41734362/article/details/80148833</a></p>
<h2 id="4æ‘„åƒå¤´é…ç½®åŠä½¿ç”¨">4æ‘„åƒå¤´é…ç½®åŠä½¿ç”¨</h2>
<h3 id="41æ‘„åƒå¤´çš„å®‰è£…">4.1æ‘„åƒå¤´çš„å®‰è£…</h3>
<blockquote>
<p>åœ¨æ ‘è“æ´¾ä¸Šå®‰è£…å¥½æ‘„åƒå¤´å</p>
<p>sudo vim /etc/modules</p>
<p>åœ¨æœ€åä¸€è¡Œæ’å…¥</p>
<p>bcm2835-v4l2    (lä¸ºå°å†™å­—æ¯L)</p>
<p>åœ¨raspi-configä¸­å¼€å¯camera</p>
<p>æœ€årebootæ ‘è“æ´¾</p>
</blockquote>
<h3 id="42-motionç›‘æ§ç³»ç»Ÿ">4.2 Motionç›‘æ§ç³»ç»Ÿ</h3>
<blockquote>
<p>å®‰è£…</p>
<pre><code class="language-sh">sudo apt install motion
</code></pre>
<p>å¤‡ä»½é…ç½®æ–‡ä»¶</p>
<pre><code class="language-sh">sudo cp /etc/motion/motion.conf /etc/motion/motion.conf.bak
</code></pre>
<p>ä¿®æ”¹é…ç½®æ–‡ä»¶</p>
<pre><code class="language-sh">vim /etc/motion/motion.conf

daemon on                        #å¼€å¯å®ˆæŠ¤è¿›ç¨‹ï¼ˆé€‰é…ï¼‰
target_dir /home/pi/motion-images    #å›¾ç‰‡ä¿å­˜çš„è·¯å¾„
#videodevice /dev/video0            #æ‘„åƒå¤´è®¾å¤‡ï¼ˆé»˜è®¤ï¼‰å¯ä¿®æ”¹            
stream_localhost off                 #å…è®¸é€šè¿‡ç½‘é¡µæŸ¥çœ‹æ‘„åƒå¤´
stream_auth_method 2               #å¼€å¯å¯†ç è®¤è¯
stream_authentication ç”¨æˆ·å:å¯†ç     #ç½‘é¡µæŸ¥çœ‹æ‘„åƒå¤´çš„ç”¨æˆ·åå’Œå¯†ç 
</code></pre>
</blockquote>
<h2 id="5-ç›¸å…³è½¯ä»¶å®‰è£…">5 ç›¸å…³è½¯ä»¶å®‰è£…</h2>
<h3 id="51-oracel-jdk">5.1 oracel jdk</h3>
<pre><code class="language-sh">#1.åœ¨oracleå®˜ç½‘ä¸‹è½½æŒ‡å®šç‰ˆæœ¬çš„jdk
#https://www.oracle.com/java/technologies/javase/javase-jdk8-downloads.html

#2.æ‹·è´åˆ°æ ‘è“æ´¾å¹¶è§£å‹
tar -zxvf jdk-8u261-linux-arm64-vfp-hflt.tar.gz

#3.åˆ›å»ºè½¯é“¾
sudo ln -s /home/pi/jdk1.8.0_261/bin/java /usr/bin/java
</code></pre>
<h3 id="52-rpigpio">5.2 RPi.GPIO</h3>
<pre><code class="language-sh">sudo apt-get install python3-rpi.gpio
</code></pre>
<h2 id="6-rtspç›´æ’­æ¨æµ">6 rtspç›´æ’­æ¨æµ</h2>
<p>å‚è€ƒé“¾æ¥ï¼ˆæœ¬è®°å½•ä¸­å¾ˆå¤šéœ€è¦ä¿®æ”¹ï¼‰ï¼š</p>
<p>https://blog.csdn.net/u013062192/article/details/80210166</p>
<ol>
<li>
<p>å®‰è£…live555</p>
<pre><code class="language-sh">è·å–live555æœ€æ–°æºç 
wget http://live555.com/liveMedia/public/live555-latest.tar.gz
è§£å‹ç¼–è¯‘å®‰è£…
tar -zxvf live555-latest.tar.gz
cd live
sudo ./genMakefiles linux
sudo make
sudo make install
</code></pre>
</li>
<li>
<p>å®‰è£…åº“æ–‡ä»¶</p>
<pre><code class="language-sh">sudo apt-get update
sudo apt-get install libavcodec54 
sudo apt-get install libswscale2
sudo apt-get install libx264-142
</code></pre>
</li>
<li>
<p>ç¼–è¯‘æ‰§è¡Œå·¥å…·</p>
<p><a href="http://git.oschina.net/secho1997/live_camera_linux">ä¸‹è½½æºç </a> copyåˆ°/opt/vc/src/hello_pi/</p>
<p>æ ¹æ®/hello_pi/ä¸‹çš„READMEç¼–è¯‘å®‰è£…iclientåº“</p>
<pre><code class="language-sh">sudo apt-get install libavcodec-dev
sudo apt-get install libswscale-dev 
sudo apt-get install libavutil-dev
</code></pre>
<p>å®‰è£…x264</p>
<pre><code class="language-sh">git clone git://git.videolan.org/x264.git
cd x264 
./configure --enable-shared --enable-pthread --enable-pic
make
make install
</code></pre>
<pre><code class="language-sh">cd live_camera_linux
sudo make
sudo make install
sudo ./zk_v4l2_x264_source

##æ­¤éƒ¨åˆ†ä¼šæŠ¥é”™ï¼Œéœ€è¦ä¿®æ”¹Makefileæ–‡ä»¶,å‚è€ƒä¸€ä¸‹å‚è€ƒé“¾æ¥é‡Œé¢çš„ä¿®æ”¹æ–¹æ³•
</code></pre>
<p>è‹¥å‡ºç°</p>
<pre><code class="language-sh">[2464] WebcamOndemandMediaSubsession .... calling
using url &quot;rtsp://192.168.1.102:9554/webcam&quot;
</code></pre>
<p>åˆ™æˆåŠŸ</p>
</li>
<li>
<p>æ’­æ”¾ç«¯ï¼š<br>
ä½¿ç”¨vlcç­‰å·¥å…·æ’­æ”¾rtspæµï¼š rtsp://IP_of_Raspi:9554/webcam</p>
</li>
</ol>
]]></content>
    </entry>
</feed>