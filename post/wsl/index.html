<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" >

<title>Win10 WSL | GCH&#39;s blog</title>

<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">

<link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.7.2/css/all.css" integrity="sha384-fnmOCqbTlWIlj8LyTjo7mOUStjsKC4pOpQbqyi7RrhN7udi9RwhKkMHpvLbHG9Sr" crossorigin="anonymous">
<link rel="shortcut icon" href="https://gaochrishao.github.io/favicon.ico?v=1626083763859">
<link rel="stylesheet" href="https://gaochrishao.github.io/styles/main.css">



<link rel="stylesheet" href="https://unpkg.com/aos@next/dist/aos.css" />
<script src="https://cdn.jsdelivr.net/npm/vue/dist/vue.js"></script>



    <meta name="description" content="ğŸ’»ï¼šubuntu18.0.4
1.åŸºæœ¬é…ç½®
1.1 å¼€å¯ssh
å…ˆé€šè¿‡ bash è¿›å…¥å­ç³»ç»Ÿä¿®æ”¹é…ç½®
sudo vi /etc/ssh/sshd_config

å¦‚æœæ–‡ä»¶ä¸å­˜åœ¨è¯´æ˜å°šæœªå®‰è£…ï¼Œåˆ™æ‰§è¡Œå®‰è£…
sudo apt-get insta..." />
    <meta name="keywords" content="Linux" />
  </head>
  <body>
    <div id="app" class="main">

      <div class="sidebar" :class="{ 'full-height': menuVisible }">
  <div class="top-container" data-aos="fade-right">
    <div class="top-header-container">
      <a class="site-title-container" href="https://gaochrishao.github.io">
        <img src="https://gaochrishao.github.io/images/avatar.png?v=1626083763859" class="site-logo">
        <h1 class="site-title">GCH&#39;s blog</h1>
      </a>
      <div class="menu-btn" @click="menuVisible = !menuVisible">
        <div class="line"></div>
      </div>
    </div>
    <div>
      
        
          <a href="/" class="site-nav">
            é¦–é¡µ
          </a>
        
      
        
          <a href="/archives" class="site-nav">
            å½’æ¡£
          </a>
        
      
        
          <a href="/tags" class="site-nav">
            æ ‡ç­¾
          </a>
        
      
        
          <a href="/post/about" class="site-nav">
            å…³äº
          </a>
        
      
    </div>
  </div>
  <div class="bottom-container" data-aos="flip-up" data-aos-offset="0">
    <div class="social-container">
      
        
          <a class="social-link" href="https://github.com/GaoChrishao" target="_blank">
            <i class="fab fa-github"></i>
          </a>
        
      
        
      
        
      
        
      
        
      
    </div>
    <div class="site-description">
      GCH's blog
    </div>
    <div class="site-footer">
      å¤‡æ¡ˆå·ï¼šçš–ICPå¤‡19004020å· | <a class="rss" href="https://gaochrishao.github.io/atom.xml" target="_blank">RSS</a>
    </div>
  </div>
</div>


      <div class="main-container">
        <div class="content-container" data-aos="fade-up">
          <div class="post-detail">
            <h2 class="post-title">Win10 WSL</h2>
            <div class="post-date">2021-07-12</div>
            
              <div class="feature-container" style="background-image: url('https://gaochrishao.github.io/post-images/wsl.png')">
              </div>
            
            <div class="post-content" v-pre>
              <p>ğŸ’»ï¼šubuntu18.0.4</p>
<h2 id="1åŸºæœ¬é…ç½®">1.åŸºæœ¬é…ç½®</h2>
<h3 id="11-å¼€å¯ssh">1.1 å¼€å¯ssh</h3>
<p>å…ˆé€šè¿‡ bash è¿›å…¥å­ç³»ç»Ÿä¿®æ”¹é…ç½®</p>
<pre><code class="language-sh">sudo vi /etc/ssh/sshd_config
</code></pre>
<p>å¦‚æœæ–‡ä»¶ä¸å­˜åœ¨è¯´æ˜å°šæœªå®‰è£…ï¼Œåˆ™æ‰§è¡Œå®‰è£…</p>
<pre><code class="language-sh">sudo apt-get install openssh-server
</code></pre>
<p>ç»§ç»­ä¿®æ”¹é…ç½®ï¼Œä¸‹é¢ä»¥å¯†ç ç™»å½•çš„é…ç½®ä½œè¯´æ˜ï¼š</p>
<pre><code class="language-sh">Port = 22 # é»˜è®¤æ˜¯22ç«¯å£ï¼Œå¦‚æœå’Œwindowsç«¯å£å†²çªæˆ–ä½ æƒ³æ¢æˆå…¶ä»–çš„å¦åˆ™ä¸ç”¨åŠ¨
#ListenAddress 0.0.0.0 # å¦‚æœéœ€è¦æŒ‡å®šç›‘å¬çš„IPåˆ™å»é™¤æœ€å·¦ä¾§çš„äº•å·ï¼Œå¹¶é…ç½®å¯¹åº”IPï¼Œé»˜è®¤å³ç›‘å¬PCæ‰€æœ‰IP
PermitRootLogin no # å¦‚æœä½ éœ€è¦ç”¨ root ç›´æ¥ç™»å½•ç³»ç»Ÿåˆ™æ­¤å¤„æ”¹ä¸º yes
PasswordAuthentication no # å°† no æ”¹ä¸º yes è¡¨ç¤ºä½¿ç”¨å¸å·å¯†ç æ–¹å¼ç™»å½•
</code></pre>
<p>ä¸»è¦é…ç½®ä»¥ä¸Šå‡ é¡¹å³å¯ ,ç„¶åå¯åŠ¨ ssh æœåŠ¡</p>
<pre><code class="language-sh">sudo service ssh start
</code></pre>
<p>å¦‚æœæç¤º <code>sshd error: could not load host key</code> åˆ™éœ€è¦é‡æ–°ç”Ÿæˆ key</p>
<pre><code class="language-sh">sudo dpkg-reconfigure openssh-server
</code></pre>
<p>æŸ¥çœ‹æœåŠ¡çŠ¶æ€</p>
<pre><code class="language-sh">sudo service ssh status
# * sshd is running  æ˜¾ç¤ºæ­¤å†…å®¹åˆ™è¡¨ç¤ºå¯åŠ¨æ­£å¸¸
</code></pre>
<pre><code class="language-sh">passwd root # è®¾ç½®ä¸‹å¯†ç 
</code></pre>
<p>é…ç½®é˜²ç«å¢™å¼€å¯ç«¯å£</p>
<blockquote>
<p>1.æ‰“å¼€ Win10 é˜²ç«å¢™è®¾ç½®ï¼Œï¼ˆå¯ä»¥é€šè¿‡å³ä¸‹è§’æœ‰ä¸ªå‘ä¸Šçš„ç®­å¤´ç‚¹å‡»ç›¾ç‰Œå¿«é€Ÿè¿›å…¥é¢æ¿ï¼‰Windows Defender å®‰å…¨ä¸­å¿ƒï¼Œç‚¹å‡»ä¸‹æ–¹çš„é«˜çº§è®¾ç½®</p>
<p>2.é€‰æ‹©å·¦ä¾§<code>å…¥ç«™è§„åˆ™</code> ç„¶åç‚¹å‡»å³ä¾§ <code>æ–°å»ºè§„åˆ™</code></p>
<p>3.é€‰æ‹© <code>ç«¯å£</code> -&gt; <code>tcp</code> -&gt; <code>ç‰¹å®šç«¯å£</code> -&gt; å¡«å…¥åˆšåˆšè®¾ç½®çš„ Port é»˜è®¤ <code>22</code> -&gt; å…è®¸è¿æ¥ -&gt; æäº¤</p>
</blockquote>
<p>å‚è€ƒé“¾æ¥ï¼šhttps://blog.csdn.net/zhouzme/article/details/81087837</p>
<h3 id="12-å¼€æœºè‡ªå¯ubuntuä»¥åŠssh">1.2 å¼€æœºè‡ªå¯ubuntuä»¥åŠssh</h3>
<ol>
<li>
<p>win+rè¾“å…¥shell:startup</p>
</li>
<li>
<p>åˆ›å»ºvbsè„šæœ¬</p>
<pre><code class="language-vbscript">Set ws = CreateObject(&quot;Wscript.Shell&quot;)
ws.run &quot;wsl -d Ubuntu-18.04 -u root /etc/init.wsl start&quot;, vbhide
</code></pre>
<p>å¯ä»¥åœ¨cmdä¸­ä½¿ç”¨wsl -læŸ¥çœ‹å‘è¡Œç‰ˆçš„åå­—</p>
</li>
<li>
<p>ç™»å½•ubuntuå­ç³»ç»Ÿï¼Œåœ¨/etc/init.wslæ–‡ä»¶ï¼Œå†™å…¥ä»¥ä¸‹å†…å®¹</p>
<pre><code class="language-sh">#! /bin/sh
/etc/init.d/ssh $1
</code></pre>
<p>ç„¶åèµ‹äºˆå¯æ‰§è¡Œæƒé™</p>
<pre><code class="language-sh">chmod +x /etc/init.wsl
</code></pre>
</li>
<li>
<p>ç¼–è¾‘sudoersï¼Œé¿å…è¾“å…¥å¯†ç </p>
<pre><code class="language-sh">sudo visudo
</code></pre>
<p>æ·»åŠ ä¸€è¡Œ</p>
<pre><code class="language-sh">%sudo ALL=NOPASSWD: /etc/init.wsl
</code></pre>
</li>
<li>
<p>å¤§åŠŸå‘Šæˆï¼Œé‡å¯ç”µè„‘è¯•è¯•çœ‹å§ï¼</p>
</li>
</ol>
<h3 id="13-æ¢æº">1.3 æ¢æº</h3>
<pre><code class="language-sh">sudo vim /etc/apt/sources.list
</code></pre>
<pre><code class="language-sh"># é˜¿é‡Œæº
deb http://mirrors.aliyun.com/ubuntu/ bionic main restricted universe multiverse
deb http://mirrors.aliyun.com/ubuntu/ bionic-security main restricted universe multiverse
deb http://mirrors.aliyun.com/ubuntu/ bionic-updates main restricted universe multiverse
deb http://mirrors.aliyun.com/ubuntu/ bionic-proposed main restricted universe multiverse
deb http://mirrors.aliyun.com/ubuntu/ bionic-backports main restricted universe multiverse
deb-src http://mirrors.aliyun.com/ubuntu/ bionic main restricted universe multiverse
deb-src http://mirrors.aliyun.com/ubuntu/ bionic-security main restricted universe multiverse
deb-src http://mirrors.aliyun.com/ubuntu/ bionic-updates main restricted universe multiverse
deb-src http://mirrors.aliyun.com/ubuntu/ bionic-proposed main restricted universe multiverse
deb-src http://mirrors.aliyun.com/ubuntu/ bionic-backports main restricted universe multiverse
</code></pre>
<pre><code class="language-sh">sudo apt update &amp;&amp; sudo apt upgrade
</code></pre>

            </div>
            
              <div class="tag-container">
                
                  <a href="https://gaochrishao.github.io/tag/tag_linux/" class="tag">
                    Linux
                  </a>
                
              </div>
            
            
              <div class="next-post">
                <div class="next">ä¸‹ä¸€ç¯‡</div>
                <a href="https://gaochrishao.github.io/post/shu-mei-pai-ru-men/">
                  <h3 class="post-title">
                    æ ‘è“æ´¾å…¥é—¨
                  </h3>
                </a>
              </div>
            

            

          </div>

        </div>
      </div>
    </div>

    <script src="https://unpkg.com/aos@next/dist/aos.js"></script>
<script type="application/javascript">

AOS.init();

var app = new Vue({
  el: '#app',
  data: {
    menuVisible: false,
  },
})

</script>


  <script src="https://cdn.bootcss.com/highlight.js/9.12.0/highlight.min.js"></script>
  <script>
    hljs.initHighlightingOnLoad()
  </script>





  </body>
</html>
